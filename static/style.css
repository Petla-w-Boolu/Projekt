/* --- Globalne Ustawienia i Zmienne Kolorów --- */
:root {
/* Paleta tła (Light Mode - domyślny) */
--bg-primary: #F7F9FC;
--bg-secondary: #FFFFFF;
--bg-tertiary: #F1F3F4;

/* Paleta tekstu (Light Mode) */
--text-primary: #202124;
--text-secondary: #5F6368;

/* Paleta akcentów (Light Mode) */
--accent-blue: #1A73E8;
--accent-blue-darker: #1B66C9;
--accent-blue-light-bg: #E8F0FE;
--accent-blue-text: var(--accent-blue);

/* Paleta obramowań (Light Mode) */
--border-color: #DADCE0;

/* Paleta wiadomości Flash (Light Mode) */
--flash-success-bg: #E6F4EA;
--flash-success-text: #1E8E3E;
--flash-success-border: #B7E1C3;
--flash-danger-bg: #FCE8E6;
--flash-danger-text: #D93025;
--flash-danger-border: #F7C4C0;
--flash-warning-bg: #FEF7E0;
--flash-warning-text: #AF6000;
--flash-warning-border: #FDEBC2;
--flash-info-bg: #E8F0FE;
--flash-info-text: #1967D2;
--flash-info-border: #C2DAFB;

/* Inne */
--font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
--shadow-minimal: 0 4px 12px rgba(0, 0, 0, 0.06);
}

/* --- Definicje Dark Mode --- */
html.dark-mode {
/* Paleta tła (Dark Mode) */
--bg-primary: #131314;
--bg-secondary: #1E1F20;
--bg-tertiary: #333537;

/* Paleta tekstu (Dark Mode) */
--text-primary: #E3E3E3;
--text-secondary: #9B9B9B;

/* Paleta akcentów (Dark Mode) */
--accent-blue: #8AB4F8;
--accent-blue-darker: #9EBEF9;
--accent-blue-light-bg: #333a47;
--accent-blue-text: var(--accent-blue);

/* Paleta obramowań (Dark Mode) */
--border-color: #3B3C3E;

/* Paleta wiadomości Flash (Dark Mode) */
--flash-success-bg: #2a5c3d;
--flash-success-text: #c4f0d5;
--flash-success-border: #3a7c5d;
--flash-danger-bg: #5c2a2a;
--flash-danger-text: #f0c4c4;
--flash-danger-border: #7c3a3a;
--flash-warning-bg: #5c532a;
--flash-warning-text: #f0eac4;
--flash-warning-border: #7c733a;
--flash-info-bg: #2a415c;
--flash-info-text: #c4d7f0;
--flash-info-border: #3a517c;

/* Inne */
--shadow-minimal: 0 4px 12px rgba(0, 0, 0, 0.2);
}


/* --- Globalne Style (używają zmiennych) --- */
* {
box-sizing: border-box;
margin: 0;
padding: 0;
}

body {
font-family: var(--font-family);
background-color: var(--bg-primary);
color: var(--text-primary);
line-height: 1.6;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
}

a {
color: var(--accent-blue);
text-decoration: none;
font-weight: 500;
}
a:hover {
text-decoration: underline;
color: var(--accent-blue-darker);
}

button {
font-family: var(--font-family);
cursor: pointer;
border: none;
background: none;
color: var(--text-primary);
}

/* --- Struktura Głównej Aplikacji --- */
#app-container {
display: flex;
height: 100vh;
width: 100vw;
overflow: hidden;
}

/* --- Boczny Panel (Sidebar) --- */
.sidebar {
width: 260px;
height: 100%;
background-color: var(--bg-secondary);
border-right: 1px solid var(--border-color);
display: flex;
flex-direction: column;
padding: 16px;
transition: transform 0.3s ease;
z-index: 100;
}

.sidebar-header {
    display: flex;
    flex-direction: column;
    gap: 16px;
    align-items: center; /* DODANE: Centruje logo i przycisk */
    padding-bottom: 24px; /* Zastępuje margin-bottom */
    border-bottom: 1px solid var(--border-color); /* Oddziela sekcję */
    margin-bottom: 0; /* Usuwamy stary margines */
}

/* Style dla logo */
.logo-link {
display: block;
padding: 8px 0;
}
.logo-link:hover {
text-decoration: none;
}
.logo-text {
 font-size: 1.4rem;
 font-weight: 700;
 color: var(--accent-blue-darker);
 height: 45px; 
 display: flex;
 align-items: center;
 padding-left: 0; /* Usunięty padding dla idealnego wyśrodkowania */
}

/* Przycisk "Nowy raport" */
.new-chat-btn {
display: flex;
align-items: center;
gap: 12px;
padding: 10px 14px;
background-color: var(--accent-blue); /* Tło ciemnoniebieskie */
border: none; /* Usunięty border */
border-radius: 20px;
font-size: 0.9rem;
font-weight: 500;
color: #FFFFFF; /* Tekst biały */
transition: background-color 0.2s ease;
}
.new-chat-btn:hover {
background-color: var(--accent-blue-darker);
  color: #FFFFFF; /* Upewnienie się, że tekst pozostaje biały */
}
/* Poprawka dla Dark Mode */
html.dark-mode .new-chat-btn {
  background-color: var(--accent-blue); /* Tło jasnoniebieskie */
  color: var(--bg-primary); /* Tekst ciemny (kolor tła strony) */
}
html.dark-mode .new-chat-btn:hover {
  background-color: var(--accent-blue-darker);
  color: var(--bg-primary);
}


.sidebar-history {
flex-grow: 1;
overflow-y: auto;
display: flex;
flex-direction: column;
  padding-top: 24px; /* Dodany odstęp od górnej krawędzi (linii) */
}

.history-title {
font-size: 0.9rem;
font-weight: 500;
color: var(--text-secondary);
padding: 8px 12px;
}

#history-list {
list-style: none;
padding: 0;
margin: 0;
}

/* --- NOWY KOD: ZMIANY DLA PRZYCISKU USUWANIA --- */

.history-item {
display: flex;
align-items: center;
gap: 12px;
padding: 10px 12px;
border-radius: 8px;
color: var(--text-primary);
font-size: 0.9rem;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
font-weight: 500;
 
 /* DODANE: Ustawia pozycjonowanie dla przycisku */
 justify-content: space-between; 
}
.history-item:hover {
background-color: var(--bg-tertiary);
text-decoration: none;
}
.history-item span {
overflow: hidden;
text-overflow: ellipsis;
 
  /* DODANE: Pozwala spanowi rosnąć i robi miejsce */
  flex-grow: 1; 
  margin-right: 8px; 
}

/* Style dla nowego przycisku usuwania */
.delete-history-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 2px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0; /* Zapobiega kurczeniu się przycisku */

    /* Ukryj domyślnie, pokaż po najechaniu na .history-item */
    visibility: hidden;
    opacity: 0;
    transition: all 0.2s ease;
}

.history-item:hover .delete-history-btn {
    visibility: visible;
    opacity: 1;
}

.delete-history-btn:hover {
    background-color: var(--bg-tertiary);
    color: var(--flash-danger-text); /* Kolor czerwony z Twoich zmiennych */
}

/* Ustawiamy rozmiar ikony w przycisku */
.delete-history-btn i {
     width: 16px;
     height: 16px;
}
/* --- KONIEC NOWEGO KODU --- */


.sidebar-footer {
padding-top: 16px;
border-top: 1px solid var(--border-color);
display: flex;
flex-direction: column;
gap: 8px;
}

.user-account, .logout-btn {
display: flex;
align-items: center;
gap: 12px;
padding: 10px 12px;
border-radius: 8px;
color: var(--text-primary);
font-size: 0.9rem;
}
.user-account:hover, .logout-btn:hover {
background-color: var(--bg-tertiary);
text-decoration: none;
}

.sidebar-toggle-btn {
position: fixed;
top: 16px;
left: 16px;
z-index: 101;
background-color: var(--bg-secondary);
color: var(--text-secondary);
border-radius: 50%;
width: 40px;
height: 40px;
display: none; /* Domyślnie ukryty */
align-items: center;
justify-content: center;
box-shadow: var(--shadow-minimal);
border: 1px solid var(--border-color);
}

/* --- Główna Zawartość (Czat) --- */
.main-content {
flex-grow: 1;
height: 100vh;
display: flex;
flex-direction: column;
position: relative;
background-color: var(--bg-primary);
}

/* Style dla przycisku motywu w rogu */
.theme-toggle-main {
/* Usunięte pozycjonowanie absolutne, aby przycisk trzymał się kontenera flex */
z-index: 50;

display: flex;
align-items: center;
justify-content: center;
width: 40px;
height: 40px;
border-radius: 50%;
color: var(--text-secondary);
background-color: var(--bg-secondary);
border: 1px solid var(--border-color);
box-shadow: 0 2px 4px rgba(0,0,0,0.05);
transition: all 0.2s ease;
}
.theme-toggle-main:hover {
color: var(--text-primary);
background-color: var(--bg-tertiary);
box-shadow: 0 4px 8px rgba(0,0,0,0.08);
}
html.dark-mode .theme-toggle-main {
box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
html.dark-mode .theme-toggle-main:hover {
box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

/* POPRAWIONA Logika pokazywania/ukrywania ikon słońca/księżyca */
/* Domyślnie (tryb jasny) pokazuj księżyc, ukryj słońce */
.theme-icon.icon-moon { display: inline-block; }
.theme-icon.icon-sun { display: none; }

/* W trybie ciemnym (.dark-mode) pokazuj słońce, ukryj księżyc */
html.dark-mode .theme-icon.icon-moon { display: none; }
html.dark-mode .theme-icon.icon-sun { display: inline-block; }


.chat-container {
flex-grow: 1;
max-width: 900px;
width: 100%;
margin: 0 auto;
padding: 24px;
display: flex;
flex-direction: column;
overflow-y: auto;
/* Dodatkowy padding na górze, aby zrobić miejsce na przycisk motywu */
padding-top: 80px;
}

.welcome-message {
margin: auto;
text-align: center;
padding-bottom: 100px;
}
.welcome-message h1 {
font-size: 2.5rem;
font-weight: 500;
margin-bottom: 40px;
color: var(--text-primary);
}
.suggested-prompts {
display: flex;
gap: 16px;
justify-content: center;
flex-wrap: wrap;
}
.prompt-suggestion {
padding: 12px 16px;
background-color: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 8px;
font-size: 0.9rem;
font-weight: 500;
color: var(--text-primary);
transition: background-color 0.2s ease, box-shadow 0.2s ease;
}
.prompt-suggestion:hover {
background-color: var(--bg-tertiary);
border-color: #C0C0C0;
}
html.dark-mode .prompt-suggestion:hover {
border-color: #555;
}

/* Lista Wiadomości */
.message-list {
display: flex;
flex-direction: column;
gap: 24px;
}

.message {
display: flex;
gap: 16px;
width: 100%;
}
.message-avatar {
width: 32px;
height: 32px;
border-radius: 50%;
background-color: var(--bg-tertiary);
display: flex;
align-items: center;
justify-content: center;
flex-shrink: 0;
}
.user-avatar { 
background-color: #D1D5DB;
color: #374151;
}
html.dark-mode .user-avatar {
background-color: #5a5a5a;
color: var(--text-primary);
}
.ai-avatar { 
background-color: var(--accent-blue);
color: var(--bg-secondary);
}
html.dark-mode .ai-avatar {
color: var(--bg-primary);
}

.message-content {
padding-top: 4px;
flex-grow: 1;
min-width: 0;
}

/* Formatowanie odpowiedzi AI */
.message-content strong, .message-content b { font-weight: 600; color: var(--text-primary); }
.message-content h1, .message-content h2, .message-content h3 { margin-top: 1.2em; margin-bottom: 0.6em; font-weight: 600;}
.message-content ul, .message-content ol { padding-left: 20px; margin-bottom: 1em; }
.message-content code {
background-color: var(--bg-tertiary);
padding: 2px 5px;
border-radius: 4px;
font-family: monospace;
font-size: 0.9em;
}
.message-content pre {
background-color: var(--bg-tertiary);
padding: 12px;
border-radius: 8px;
overflow-x: auto;
border: 1px solid var(--border-color);
}
.message-content blockquote {
border-left: 3px solid var(--border-color);
padding-left: 12px;
margin: 1em 0;
color: var(--text-secondary);
}
.message-content .error { color: #D93025; }
html.dark-mode .message-content .error { color: #f88a8a; }

/* --- Pole Promptu --- */
.prompt-area {
width: 100%;
max-width: 900px;
margin: 0 auto;
padding: 0 24px 24px 24px;
}

/* Wyrównanie przycisku wysyłania */
.prompt-input-wrapper {
/* position: relative; - Już niepotrzebne */
display: flex;
align-items: flex-end; /* Kluczowe: trzyma elementy na dole */
background-color: var(--bg-secondary);
border-radius: 28px;
padding: 8px 12px; /* Uproszczony padding */
border: 1px solid var(--border-color);
box-shadow: 0 2px 8px rgba(0,0,0,0.05);
transition: border-color 0.2s ease, box-shadow 0.2s ease;
  gap: 8px; /* Dodana przerwa między polem a przyciskiem */
}
.prompt-input-wrapper:focus-within {
border-color: var(--accent-blue);
box-shadow: 0 0 0 3px var(--accent-blue-light-bg);
}

#prompt-input {
flex-grow: 1;
border: none;
background: none;
color: var(--text-primary);
font-family: var(--font-family);
font-size: 1rem;
line-height: 1.5; /* ok. 24px */
resize: none;
outline: none;
max-height: 200px;
overflow-y: auto;
padding-right: 0; 
  padding-left: 8px;
 
  /* DODANE: Centruje tekst w pionie */
  padding-top: 8px;
  padding-bottom: 8px;
}

.send-btn {
/* position: absolute; - USUNIĘTE */
/* right: 8px; - USUNIĘTE */
/* bottom: 8px; - USUNIĘTE */
  flex-shrink: 0; /* Ważne: przycisk się nie skurczy */
width: 40px;
height: 40px;
border-radius: 50%;
background-color: var(--accent-blue); /* Ciemnoniebieskie tło */
color: var(--bg-secondary); /* Biała strzałka (w light mode) */
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s ease;
}

html.dark-mode .send-btn {
color: var(--bg-primary); /* Strzałka staje się ciemna (w dark mode) */
}
.send-btn:hover:not(:disabled) {
background-color: var(--accent-blue-darker);
}
.send-btn:disabled {
background-color: var(--bg-tertiary);
color: var(--text-secondary);
opacity: 1;
cursor: not-allowed;
}

.footer-info {
text-align: center;
font-size: 0.75rem;
color: var(--text-secondary);
margin-top: 12px;
}

/* Spinner ładowania */
.loading-spinner {
width: 20px;
height: 20px;
border: 3px solid var(--border-color);
border-top-color: var(--accent-blue);
border-radius: 50%;
animation: spin 1s linear infinite;
}
@keyframes spin {
to { transform: rotate(360deg); }
}


/* --- Strona Logowania --- */
body.login-page {
display: flex;
align-items: center;
justify-content: center;
height: 100vh;
background-color: var(--bg-primary);
}

.login-container {
background-color: var(--bg-secondary);
padding: 40px;
border-radius: 12px;
width: 100%;
max-width: 400px;
box-shadow: var(--shadow-minimal);
border: 1px solid var(--border-color);
}
/* Logo na stronie logowania */
.logo-login {
display: block;
height: 60px; /* Nieco większe logo */
width: auto;
margin: 0 auto 24px auto;
object-fit: contain;
}

.login-container h1 {
text-align: center;
font-size: 1.5rem;
margin-bottom: 24px;
font-weight: 600;
}

.form-group {
margin-bottom: 20px;
}
.form-group label {
display: block;
margin-bottom: 6px;
font-size: 0.9rem;
color: var(--text-secondary);
font-weight: 500;
}
.form-group input {
width: 100%;
padding: 12px;
background-color: var(--bg-primary);
border: 1px solid var(--border-color);
border-radius: 8px;
color: var(--text-primary);
font-size: 1rem;
transition: border-color 0.2s ease, box-shadow 0.2s ease;
}
.form-group input:focus {
outline: none;
border-color: var(--accent-blue);
box-shadow: 0 0 0 3px var(--accent-blue-light-bg);
}

.login-submit-btn {
width: 100%;
padding: 12px;
background-color: var(--accent-blue);
color: #FFFFFF;
border-radius: 8px;
font-size: 1rem;
font-weight: 700;
transition: background-color 0.2s ease;
}
.login-submit-btn:hover {
background-color: var(--accent-blue-darker);
}

.login-toggle {
text-align: center;
margin-top: 20px;
font-size: 0.9rem;
}

/* Style dla wiadomości Flash (używają zmiennych) */
.flash-message {
padding: 12px 16px;
margin-bottom: 16px;
border-radius: 8px;
font-size: 0.9rem;
font-weight: 500;
border: 1px solid transparent;
}
.flash-message.success {
background-color: var(--flash-success-bg);
color: var(--flash-success-text);
border-color: var(--flash-success-border);
}
.flash-message.danger {
background-color: var(--flash-danger-bg);
color: var(--flash-danger-text);
border-color: var(--flash-danger-border);
}
.flash-message.warning {
background-color: var(--flash-warning-bg);
color: var(--flash-warning-text);
border-color: var(--flash-warning-border);
}
.flash-message.info {
background-color: var(--flash-info-bg);
color: var(--flash-info-text);
border-color: var(--flash-info-border);
}


/* --- Responsywność (Mobile) --- */
@media (max-width: 768px) {
.sidebar {
 position: fixed;
 left: 0;
 top: 0;
 transform: translateX(-100%);
 box-shadow: 4px 0 15px rgba(0,0,0,0.1);
 border-right: none;
}
html.dark-mode .sidebar {
 box-shadow: 4px 0 15px rgba(0,0,0,0.3);
}
.sidebar.open {
 transform: translateX(0);
}

.sidebar-toggle-btn {
 display: flex;
}

.main-content {
 width: 100%;
}

.chat-container, .prompt-area {
 max-width: 100%;
 padding: 16px;
}

.chat-container {
 /* Padding góra, aby nie zakrył przycisk menu i motywu */
 padding-top: 70px;
}

/* Przycisk motywu na mobile */
.theme-toggle-main {
 top: 16px;
 right: 16px;
}

.welcome-message h1 {
 font-size: 1.8rem;
}

.login-container {
 width: 90%;
 padding: 24px;
}
}


/* --- 
--- NOWE STYLE DLA INTERAKTYWNEGO RAPORTU --- 
--- Skopiuj ten blok na KONIEC swojego pliku style.css --- 
--- */

/* Główny kontener raportu w wiadomości AI */
.interactive-report {
    display: flex;
    flex-direction: column;
    gap: 24px; /* Odstępy między sekcjami (KPI, wykres, tabela) */
}

.interactive-report h2 {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 8px;
    margin: 0; /* Resetuje domyślne marginesy h2 */
}

.interactive-report h3 {
    font-size: 1.15rem; /* Nieco większe niż w .message-content */
    font-weight: 600;
    color: var(--text-primary);
    margin-top: 8px; /* Dodaje trochę odstępu nad h3 */
    margin-bottom: 12px; /* Odstęp pod h3, przed treścią */
}

/* Kontener na karty KPI */
.kpi-container {
    display: grid;
    /* Automatycznie dopasowuje kolumny: min. 160px, maks. 1fr */
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 16px;
}

/* Pojedyncza karta KPI */
.kpi-card {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    box-shadow: var(--shadow-minimal);
}

.kpi-title {
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.kpi-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 6px;
}
.kpi-value i {
    width: 18px;
    height: 18px;
}
.kpi-date {
    font-size: 0.8rem;
    font-weight: 400;
    color: var(--text-secondary);
    margin-left: 4px;
}

/* Kolory dla zmian KPI (używają zmiennych flash) */
.kpi-value.diff-positive { color: var(--flash-success-text); }
.kpi-value.diff-negative { color: var(--flash-danger-text); }
.kpi-value.diff-neutral { color: var(--text-secondary); }

/* Lepsze kolory w Dark Mode (zmienne flash są trochę za ciemne) */
html.dark-mode .kpi-value.diff-positive { color: #4ade80; }
html.dark-mode .kpi-value.diff-negative { color: #f87171; }
html.dark-mode .kpi-value.diff-neutral { color: var(--text-secondary); }

/* Kontener na wykres */
.chart-container {
    position: relative;
    height: 350px; /* Stała wysokość dla wykresu */
    width: 100%;
    background-color: var(--bg-secondary);
    padding: 16px;
    border-radius: 12px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-minimal);
}

/* Podsumowanie statystyczne */
.stats-summary {
    list-style: none;
    padding: 16px;
    background-color: var(--bg-tertiary);
    border-radius: 8px;
    font-size: 0.9rem;
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.stats-summary li {
    display: flex;
    justify-content: space-between;
    padding: 4px 0;
    border-bottom: 1px dashed var(--border-color);
}
.stats-summary li:last-child {
    border-bottom: none;
}
.stats-summary li strong {
    color: var(--text-primary);
    font-weight: 600;
}

/* Kontener na tabelę (dla przewijania) */
.table-container {
    max-height: 400px;
    overflow-y: auto;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    /* Ukrywa brzydki pasek przewijania na Webkit */
    scrollbar-width: thin;
    scrollbar-color: var(--border-color) var(--bg-secondary);
}
.table-container::-webkit-scrollbar {
    width: 8px;
}
.table-container::-webkit-scrollbar-track {
    background: var(--bg-secondary);
    border-radius: 8px;
}
.table-container::-webkit-scrollbar-thumb {
    background-color: var(--border-color);
    border-radius: 8px;
}

/* Tabela z danymi */
.report-table {
    width: 100%;
    border-collapse: collapse;
}

.report-table th,
.report-table td {
    padding: 12px 16px;
    text-align: left;
    font-size: 0.9rem;
    border-bottom: 1px solid var(--border-color); /* Zastępuje linię w tr */
}

.report-table th {
    background-color: var(--bg-tertiary);
    font-weight: 600;
    position: sticky;
    top: 0; /* Trzyma nagłówek na górze podczas przewijania */
    z-index: 1;
}

/* Usuwa podwójną linię na dole */
.report-table tr:last-child th,
.report-table tr:last-child td {
    border-bottom: none;
}

.report-table tr:hover {
    background-color: var(--bg-tertiary);
}
/* Poprawka dla Dark Mode */
html.dark-mode .report-table tr:hover {
    background-color: var(--bg-tertiary);
}

/* Informacja o źródle danych */
.source-info {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-top: 12px;
    text-align: right;
}

/* Styl dla bloku błędu raportu (używa zmiennych flash) */
.report-error {
    background-color: var(--flash-danger-bg);
    border: 1px solid var(--flash-danger-border);
    color: var(--flash-danger-text);
    padding: 16px;
    border-radius: 8px;
}
.report-error h4 {
    margin-bottom: 8px;
    color: inherit;
    margin-top: 0; /* Resetuje domyślne marginesy */
}
.report-error p {
    font-size: 0.9rem;
    margin: 0;
}

/* Specjalne style dla bloków Markdown wewnątrz raportu */
.markdown-content {
    /* Wszystkie style (ul, strong, etc.) są już zdefiniowane
       w globalnych stylach .message-content */
}
/* Usuwamy domyślne tło z <pre>, gdy jest w .markdown-content.
   To pozwala AI na wysyłanie tekstu z nowymi liniami (w <pre>)
   który jest potem parsowany przez marked.js i wygląda jak zwykły tekst.
*/
.markdown-content pre {
    background: none;
    border: none;
    padding: 0;
    font-family: inherit; /* Używa czcionki aplikacji, nie monospace */
    font-size: inherit;
    color: inherit;
    white-space: pre-wrap; /* Kluczowe: zawija tekst i szanuje nowe linie */
    word-wrap: break-word;
    overflow-x: hidden;
}

/* --- Style dla przycisków akcji w nagłówku --- */
.main-header-actions {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    z-index: 100;
}

/* Kontener dla przycisku pobierania i jego menu */
.download-container {
    position: relative;
}

/* Menu pobierania - domyślnie ukryte */
.download-menu {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    box-shadow: var(--shadow-minimal);
    padding: 0.5rem;
    margin-top: 0.5rem;
    width: 150px;
    z-index: 101;
}

/* Pokazywanie menu po dodaniu klasy 'active' */
.download-menu.active {
    display: block;
}

/* Opcje w menu */
.download-option {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    border-radius: 6px;
    color: var(--text-primary);
    text-decoration: none;
    font-size: 0.9rem;
}

.download-option:hover {
    background-color: var(--bg-tertiary);
    text-decoration: none;
}

.download-option i {
    width: 18px;
    height: 18px;
}